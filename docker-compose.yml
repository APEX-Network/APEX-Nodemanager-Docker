version: '3.2'
services:
  nodemanager:
    build:
      context: manager/app
      args:
        GRADLE_VERSION: "4.10.3"
        APP_PORT: 9100
    image: nodemanager
    container_name: nodemanager
    ports:
      - 9100:9100
      - 9090:9090
    networks:
      - mongodb

  mongodb:
    image: mongo
    container_name: mongo-db-container
    volumes:
    - ./init-mongo.js:/docker-entrypoint-initdb.d/init-mongo-js:ro
    - ./mongo-volume:/data/db
    ports:
      - 27017-27019:27017-27019
    networks:
      - mongodb

networks:
  mongodb:
    driver: bridge